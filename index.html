<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Hub - Choose Your Tool</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-title">
                    <h1>üéØ Project Hub</h1>
                    <p>Choose from our collection of powerful tools and games</p>
                </div>
                <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" aria-label="Toggle theme">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>
        </header>

        <main>
            <div class="projects-grid" id="projectsGrid">
                <!-- Project cards will be rendered here from projects.json -->
            </div>

            <div class="info-section">
                <h2>About These Projects</h2>
                <div class="info-grid">
                    <div class="info-card">
                        <h4>üé® Photo Editing Tools</h4>
                        <p>Professional-grade image manipulation tools for color adjustment, quantization, and resizing with batch processing capabilities.</p>
                    </div>
                    <div class="info-card">
                        <h4>üÉè Interactive Games</h4>
                        <p>Classic card games and privacy-focused educational games recreated with modern web technologies for entertainment and learning.</p>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Built with modern web technologies ‚Ä¢ Choose your adventure above!</p>
        </footer>
    </div>

    <script>
        // Theme management
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = themeToggle.querySelector('.theme-icon');
        
        function getTheme() {
            return localStorage.getItem('theme') || 'light';
        }
        
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            themeIcon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }
        
        function toggleTheme() {
            const currentTheme = getTheme();
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        }
        
        // Initialize theme
        setTheme(getTheme());
        
        // Projects loader (read-only)
        async function loadProjects() {
            try {
                const res = await fetch('projects.json');
                const list = await res.json();
                renderProjects(list);
            } catch (e) {
                console.error('Failed to load projects.json', e);
            }
        }

        function renderProjects(projects) {
            const grid = document.getElementById('projectsGrid');
            grid.innerHTML = '';
            projects.forEach((p) => {
                const card = document.createElement('div');
                card.className = 'project-card';

                const icon = document.createElement('div'); icon.className = 'project-icon'; icon.textContent = p.icon || 'üîó';
                const title = document.createElement('h3'); title.textContent = p.title;
                const desc = document.createElement('p'); desc.textContent = p.description || '';

                const feats = document.createElement('div'); feats.className = 'project-features';
                (p.tags||[]).slice(0,3).forEach(t => { const s=document.createElement('span'); s.className='feature-tag'; s.textContent=t; feats.appendChild(s); });

                const linkWrap = document.createElement('div'); linkWrap.className='project-link';

                // If project has an embedUrl, show preview toggle + iframe
                if (p.embedUrl) {
                    const controls = document.createElement('div'); controls.style.display='flex'; controls.style.gap='0.5rem'; controls.style.justifyContent='center';
                    const previewBtn = document.createElement('button'); previewBtn.className='launch-btn'; previewBtn.style.width='auto'; previewBtn.textContent = 'Preview';
                    const openBtn = document.createElement('a'); openBtn.className='launch-btn'; openBtn.style.width='auto'; openBtn.style.display='inline-block'; openBtn.textContent = p.buttonText || 'Open'; openBtn.href = p.url; openBtn.target='_blank';
                    controls.appendChild(previewBtn); controls.appendChild(openBtn);
                    linkWrap.appendChild(controls);

                    const iframeWrap = document.createElement('div'); iframeWrap.style.marginTop='1rem'; iframeWrap.style.display='none';
                    const iframe = document.createElement('iframe');
                    iframe.src = p.embedUrl;
                    iframe.width = '100%';
                    iframe.height = '500';
                    iframe.style.border = '1px solid rgba(0,0,0,0.12)';
                    iframe.sandbox = 'allow-scripts allow-forms allow-same-origin';
                    iframeWrap.appendChild(iframe);
                    linkWrap.appendChild(iframeWrap);

                    previewBtn.onclick = () => {
                        iframeWrap.style.display = iframeWrap.style.display === 'none' ? 'block' : 'none';
                    };
                } else {
                    const a = document.createElement('a'); a.href = p.url; a.target = '_blank'; a.className = 'project-link';
                    const btn = document.createElement('button'); btn.className = 'launch-btn'; btn.textContent = p.buttonText || 'Open';
                    a.appendChild(btn);
                    linkWrap.appendChild(a);
                }

                card.appendChild(icon);
                card.appendChild(title);
                card.appendChild(desc);
                card.appendChild(feats);
                card.appendChild(linkWrap);

                grid.appendChild(card);
            });
        }

        loadProjects();
    </script>
</body>
</html>
